# 约定
无人机的微风平坦量包括三维位置和偏航角。无人机的状态有位置、速度、加速度及其高阶导数和姿态、角速度及其高阶导数。

无人机系统状态

无人机状态MAVState

无人机物理限制

无人机轨迹,起点/终点/起始时间/时长

设定值,期望值


# 模块

## 定位

## 规划器
    轨迹表达：多项式、B样条、特殊轨迹
    搜索：A*、hybird A*
    优化：nlopt

## 感知
    表征工作空间：gridmap

## 控制器
    PX4外部位置控制器
    姿态控制器

## 仿真器

## 逻辑控制
    - 在充满障碍物的空间中，设置若干个途径点，控制无人机安全地依次通过这些点。  
        目标点/途径点由起点、中间点和终点组成。        
        途径点需要加上HomePosition偏置。途径点的高度可以是相对HomePosition或者进入OFFBOARD的高度。HomePosition记录无人机解锁的位姿。
        发送期望点和执行规划需要部署在不同的进程/线程上，防止规划长时间占用CPU资源。

        控制逻辑
            如果未解锁或非OFFBOARD，那么复位并退出。
            如果当前轨迹存在碰撞风险，那么立即重新规划。
            对途径点加上HomePosition偏置。
            在GEN_NEW_TRAJ、REPLAN_TRAJ、EXEC_TRAJ、WAIT_TRAJ四种状态切换。
        订阅
            无人机系统状态
            无人机Home点
            里程计
            规划结果的轨迹
            规划结果的标志
            碰撞检测结果
        发布
            规划器的起点和终点
            无人机期望值

    - 在mission模式下，如果发现障碍物，控制无人机绕过障碍物并且返回原有航线。